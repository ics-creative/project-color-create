!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r,s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=function(t){function e(){return t.call(this)||this}return s(e,t),e.prototype.setData=function(t,e,i,r){},e.prototype.setOnlyColor=function(t,e,i){},e}(createjs.Container),a=function(){function t(t){void 0===t&&(t=0),this._uint=t,this.setUint(t)}return t.prototype.setUint=function(t){this.setData(t)},t.prototype.getUint=function(){return this._uint},t.prototype.setCode=function(t){this.setData(parseInt(t.split("#")[1],16))},t.prototype.getCode=function(){return this._code},t.prototype.setRGBString=function(t){var e=t.split("(")[1].split(")")[0].split(",");this.setData(parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2]))},t.prototype.getRGBString=function(){return this._rgbString},t.prototype.setR=function(t){this.setData(t<<16|this._g<<8|this._b)},t.prototype.getR=function(){return this._r},t.prototype.setG=function(t){this.setData(this._r<<16|t<<8|this._b)},t.prototype.getG=function(){return this._g},t.prototype.setB=function(t){this.setData(this._r<<16|this._g<<8|t)},t.prototype.getB=function(){return this._b},t.prototype.setRGB=function(t,e,i){this.setData(t<<16|e<<8|i)},t.prototype.getRGB=function(){return[this._r,this._g,this._b]},t.prototype.setData=function(e){this._uint=e,this._r=e>>16|0,this._g=(65280&e)>>8|0,this._b=255&e|0;var i=e.toString(16).toUpperCase();i=t.zero[i.length]+i,this._code="#"+i,this._rgbString="rgb("+this._r+","+this._g+","+this._b+")"},t.RGBtoCMYK=function(e){var i=new t(e),r=1-i.getR()/255,s=1-i.getG()/255,n=1-i.getB()/255,a=r>s?s>n?n:s:r>n?n:r,o=1-a;return[(r-a)/o,(s-a)/o,(n-a)/o,a]},t.zero=["なし","00000","0000","000","00","0",""],t}(),o=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(t){function e(){var e=t.call(this)||this;e.shape=new createjs.Shape,e.addChild(e.shape),e.color=new a;var i=new createjs.Shape;return e.addChild(i),i.graphics.beginStroke("#666666"),i.graphics.drawCircle(0,0,50),i.graphics.endFill(),e}return o(e,t),e.prototype.drawRect=function(t,e){this.color.setUint(t),this.shape.graphics.clear(),this.shape.graphics.beginFill(this.color.getRGBString()),this.shape.graphics.drawCircle(0,0,e),this.shape.graphics.endFill()},e}(createjs.Container),h=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.addText=function(t,e,i,r,s,n,a,o){void 0===a&&(a="center"),void 0===o&&(o="middle");var c=new createjs.Text;return c.font=e,c.color=i,t.addChild(c),c.x=r,c.y=s,c.text=n,c.textAlign=a,c.textBaseline=o,c},e.getRectShape=function(t,e,i,r){var s=new createjs.Shape;return s.graphics.beginFill(i),s.graphics.drawRect(0,0,t,e),s.graphics.endFill(),s.alpha=r,s},e.getRoundRectShape=function(t,e,i,r,s){var n=new createjs.Shape;return n.graphics.beginFill(r),n.graphics.drawRoundRect(0,0,t,e,i),n.graphics.endFill(),n.alpha=s,n},e}(createjs.Container),u=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(t){function e(e,i,r){var s=t.call(this)||this;s.cursor="pointer",s.regX=e/2,s.regY=i/2;var n=l.getRoundRectShape(e,i,5,"#FFFFFF",1);return s.addChild(n),n.on("mousedown",function(t){createjs.Tween.get(n,{override:!0}).to({alpha:.5},250,createjs.Ease.cubicOut)}),n.on("mouseup",function(){createjs.Tween.get(n,{override:!0}).to({alpha:1},250,createjs.Ease.cubicOut)}),s._btnShape=n,l.addText(s,"24px "+R.FONT_NAME,"#000000",Math.round(e/2),Math.round(i/2),r,"center","middle"),s}return u(e,t),e.prototype.dispose=function(){this._btnShape.removeAllEventListeners("mousedown"),this._btnShape.removeAllEventListeners("mouseup"),this.removeAllChildren(),this._btnShape=null},e}(createjs.Container),g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=function(t){function e(){var e=t.call(this)||this;return e.shape=new createjs.Shape,e.addChild(e.shape),e.color=new a,e}return g(e,t),e.prototype.drawReticle=function(t,e,i,r,s){this.color.setUint(t);var n=this.shape.graphics,a=this.color.getRGBString();n.clear(),this.drawStroke(n,a,e),this.drawStroke(n,a,i),this.drawStroke(n,a,r),this.drawStroke(n,a,s);for(var o=[],c=[],h=0;h<3;h++){var l=-Math.PI/2+h*Math.PI*2/3;o[h]=Math.cos(l),c[h]=Math.sin(l)}for(var u=(s-e+3)/6|0,p=0;p<u;p++)for(h=0;h<3;h++){var g=6*o[h]*p,d=6*c[h]*p;n.moveTo(e*o[h]+g,e*c[h]+d),n.lineTo(e*o[h]+3*o[h]+g,e*c[h]+3*c[h]+d)}},e.prototype.drawStroke=function(t,e,i){t.beginStroke(e),t.drawCircle(0,0,i),t.endFill()},e}(createjs.Container),_=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),T=function(t){function e(){var e=t.call(this)||this;e.r=0,e.g=0,e.b=0,e._color=new a,e._cover=l.getRectShape(R.WIDTH*R.SCALE,R.HEIGHT,"#000000",.8),e._cover.x=-R.STAGE_OFFSET_X,e.addChild(e._cover);var i=new d;return e.addChild(i),i.x=160,i.y=216,i.drawReticle(6710886,37,37,65,65),e.reticle=i,e._textResult=l.addText(e,"18px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH/2,44,"Your Color #000000"),e._textTarget=l.addText(e,"18px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH/2,75,"Target Color #000000"),e._textTime=l.addText(e,"20px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH/2,207,"Time\n10.0"),e._textTime.textAlign="center",e._textR=l.addText(e,"40px "+R.FONT_NAME,"#FF0000",(R.STAGE_WIDTH>>1)-40,244,"100%"),e._textR.textAlign="right",e._textG=l.addText(e,"40px "+R.FONT_NAME,"#00FF00",R.STAGE_WIDTH>>1,146,"100%","center"),e._textB=l.addText(e,"40px "+R.FONT_NAME,"#0000FF",40+(R.STAGE_WIDTH>>1),244,"100%","left"),e.containerScore=new createjs.Container,e.addChild(e.containerScore),e._textScore=l.addText(e.containerScore,"32px "+R.FONT_NAME,"#FFFFFF",48,310,"Score: 0","center"),e.containerScore.x=R.STAGE_WIDTH>>1,e.containerScore.y=e._textScore.y,e._textScore.x=0,e._textScore.y=-20,e._btnNext=new p(187,35,"Next Round"),e._btnNext.x=R.STAGE_WIDTH/2,e._btnNext.y=401,e._btnNext.addEventListener("click",function(){e.dispatchEvent("next",e)}),e.addChild(e._btnNext),e._isPlaying=!1,e}return _(e,t),e.prototype.setData=function(t){var e=new a;e.setUint(t.result),this._textResult.color=e.getRGBString(),this._textResult.text="Your Color "+e.getCode(),e.setUint(t.target),this._textTarget.color=e.getRGBString(),this._textTarget.text="Target Color "+e.getCode(),this._textR.text=String(t.r)+"%",this._textG.text=String(t.g)+"%",this._textB.text=String(t.b)+"%",this._textTime.text="Time\n"+String(t.time.toFixed(1)),this._textScore.text="Score: "+String(t.total),this._textTarget.alpha=0,this._textResult.alpha=0,createjs.Tween.get(this._textTarget).to({alpha:1},300,createjs.Ease.getPowOut(2)),createjs.Tween.get(this._textResult).to({alpha:1},300,createjs.Ease.getPowOut(2)),this._textTime.alpha=0,createjs.Tween.get(this._textTime).wait(400).to({alpha:1},300,createjs.Ease.getPowOut(2)),this._textR.alpha=0,createjs.Tween.get(this._textR).wait(500).to({alpha:1},300,createjs.Ease.getPowOut(2)),this._textG.alpha=0,createjs.Tween.get(this._textG).wait(550).to({alpha:1},300,createjs.Ease.getPowOut(2)),this._textB.alpha=0,createjs.Tween.get(this._textB).wait(600).to({alpha:1},300,createjs.Ease.getPowOut(2)),this.r=0,this.g=0,this.b=0,createjs.Tween.get(this).wait(800).set({r:0,g:0,b:0}).to({r:t.r,g:t.g,b:t.b},400).call(this.onTick).set({_isPlaying:!1}),this.reticle.scaleX=0,this.reticle.scaleY=0,createjs.Tween.get(this.reticle).wait(800).to({scaleX:1,scaleY:1},400,createjs.Ease.getPowOut(2)),this.containerScore.scaleX=4,this.containerScore.scaleY=4,this.containerScore.alpha=0,createjs.Tween.get(this.containerScore).wait(1300).to({scaleX:1,scaleY:1},200,createjs.Ease.getBackOut(1)),createjs.Tween.get(this.containerScore).wait(1300).to({alpha:1},200,createjs.Ease.getPowOut(3)),this._btnNext.scaleX=0,this._btnNext.scaleY=0,createjs.Tween.get(this._btnNext).wait(1600).to({scaleX:1,scaleY:1},300,createjs.Ease.getPowOut(5)),this._isPlaying=!0},e.prototype.onTick=function(){this._isPlaying&&(this._textR.text=String(0|this.r)+"%",this._textG.text=String(0|this.g)+"%",this._textB.text=String(0|this.b)+"%")},e}(createjs.Container),f=function(){return function(){}}(),w=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),x=function(t){function e(e,i,r,s,n){void 0===n&&(n=0);var o=t.call(this)||this;return o.colorName=e,o.dMax=r,o.dMin=s,o.innerSize=i,o.line=new createjs.Shape,o.addChild(o.line),o.shape=new createjs.Shape,o.addChild(o.shape),o.shape2=new createjs.Shape,o.addChild(o.shape2),o.baseColor=n,o.text=new createjs.Text,o.addChild(o.text),o.text.font="40px Arial",o.text.color=new a(n).getRGBString(),o.text.y=-150,o.color=new a,o.shape.compositeOperation="lighter",o.shape2.compositeOperation="lighter",o.shape.alpha=.2,o}return w(e,t),e.prototype.init=function(t,e,i){this.identifier=t,this.initX=e,this.initY=i,this.x=this.initX,this.y=this.initY,this.line.graphics.clear()},e.prototype.initDraw=function(t,e){this.line.graphics.clear(),this.text.text="",this.drawCircle(t,e)},e.prototype.drawCircle=function(t,e){this.color.setUint(t),this.shape.graphics.clear(),this.shape.graphics.beginFill(this.color.getRGBString()),this.shape.graphics.drawCircle(0,0,e),this.shape.graphics.endFill(),this.shape2.graphics.clear(),this.shape2.graphics.beginFill(this.color.getRGBString()),this.shape2.graphics.drawCircle(0,0,this.innerSize),this.shape2.graphics.endFill()},e.prototype.getDPercent=function(t,e){var i=t-this.initX,r=e-this.initY,s=(Math.sqrt(i*i+r*r)-this.dMin)/(this.dMax-this.dMin);return s=(s=s<0?0:s)>1?1:s,this.dPercent=s,this.dPercent},e.prototype.setText=function(t,e,i){this.text.x=t-this.initX,this.text.y=e-this.initY,this.text.text=this.colorName+":"+i},e.prototype.setData=function(t,e,i,r,s){this.color.setUint(t),this.shape.graphics.clear(),this.shape.graphics.beginFill(this.color.getRGBString()),this.shape.graphics.drawCircle(0,0,e),this.shape.graphics.endFill(),this.shape2.graphics.clear(),this.shape2.graphics.beginFill(this.color.getRGBString()),this.shape2.graphics.drawCircle(0,0,this.innerSize),this.shape2.graphics.endFill(),this.x=i,this.y=r;var n=this.line;n.graphics.clear(),n.graphics.beginStroke(new a(this.baseColor).getRGBString()),n.graphics.moveTo(this.initX-i,this.initY-r),n.graphics.lineTo(0,0),n.graphics.endStroke(),n.graphics.beginStroke(new a(this.baseColor).getRGBString()),n.graphics.drawCircle(0,0,50),n.graphics.endStroke()},e}(createjs.Container),v=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),y=function(t){function e(e){var i=t.call(this)||this;return i.showTime=300,i.hideTime=300,i.sceneId=e,i}return v(e,t),e.prototype.addToStage=function(t){t.addChild(this)},e.prototype.init=function(){},e.prototype.show=function(){this.alpha=0,createjs.Tween.get(this).to({alpha:1},this.showTime,createjs.Ease.getPowOut(2)),this.visible=!0},e.prototype.hide=function(){this.alpha=1,createjs.Tween.get(this).to({alpha:0},this.showTime,createjs.Ease.getPowOut(2)).set({visible:!1}),this.visible=!0},e.prototype.dispose=function(){},e}(createjs.Container),S=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),F=function(t){function e(e){var i=t.call(this,e)||this;return i.TIME_LIMIT=10,i.ROUND_MAX=3,i}return S(e,t),e.prototype.init=function(){var t=this;this.stage.on("stagemousedown",function(e){t.canvas_touchStartHandler(e)}),this.stage.on("stagemousemove",function(e){t.canvas_touchMoveHandler(e)}),this.stage.on("stagemouseup",function(e){t.canvas_touchEndHandler(e)}),l.addText(this,"20px "+R.FONT_NAME,"#FFFFFF",85,47,"You"),l.addText(this,"20px "+R.FONT_NAME,"#FFFFFF",235,47,"Target"),this.textRound=l.addText(this,"20px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH/2,14,"Round"),this.textTime=l.addText(this,"32px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,40,String(this.TIME_LIMIT)),this.textTime.textAlign="center";var e=new c;e.drawRect(16777215,45),this.addChild(e),e.x=237,e.y=127,this.targetRect=e,(e=new c).drawRect(16777215,45),this.addChild(e),e.x=87,e.y=127,this.currentRect=e,this.reticle=new d,this.addChild(this.reticle),this.reticle.visible=!1,this.centerPointX=R.STAGE_WIDTH>>1,this.centerPointY=172+(R.STAGE_HEIGHT-172>>1),this.particleRange=150,this.thetaDelay=2*Math.PI/3,this.usedCircles=[],this.currentParticleList=[],this.currentTouchList=[];for(var i,r=["r","g","b"],s=[16711680,65280,255],a=0;a<3;a++){var o=new x(r[a],10,105,25,s[a]);this.addChild(o),o.x=this.centerPointX,o.y=this.centerPointY,this.usedCircles[a]=o,i=new n,this.addChild(i),this.currentParticleList[a]=i,this.currentTouchList[a]=null}var h=new x("",5,0,0);h.drawCircle(16777215,20),this.addChild(h),h.visible=!1,this.gp=h,i=new n,this.addChild(i),this.gpParticle=i,this.containerTextStart=new createjs.Container,this.addChild(this.containerTextStart),this.containerTextStart.x=R.STAGE_WIDTH>>1,this.containerTextStart.y=R.STAGE_HEIGHT>>1,this.textStart=l.addText(this.containerTextStart,"50px "+R.FONT_NAME,"#FFFFFF",0,-20,"Start"),this.cover=new T,this.cover.alpha=0,this.addChild(this.cover),this.cover.on("next",function(){t.next()}),this.round=this.ROUND_MAX,this.scoreList=[],this.theta=0,this.start(),createjs.Ticker.on("tick",this.onTick,this)},e.prototype.onTick=function(){if(0==this.state||1==this.state){this.theta+=.01;for(var t=this.currentTouchList.length,e=0;e<t;e++){var i=this.usedCircles[e];if(null!=this.currentTouchList[e])i.x+=.4*((this.currentTouchList[e].stageX-R.STAGE_OFFSET_X)/R.SCALE-i.x),i.y+=.4*(this.currentTouchList[e].stageY/R.SCALE-i.y);else{var r=this.theta+e*this.thetaDelay;i.x+=.01*(this.centerPointX+this.particleRange*Math.cos(r)-i.x),i.y+=.01*(this.centerPointY+this.particleRange*Math.sin(r)-i.y)}this.currentParticleList[e].setData(i.color.getUint(),i.x,i.y,25)}}2==this.state&&(this.timeLeft=this.TIME_LIMIT-((new Date).getTime()-this.startTime)/1e3,this.timeLeft<=0?(this.timeLeft=0,this.textTime.text="0.0",this.end()):this.textTime.text=String(this.timeLeft.toFixed(1)))},e.prototype.canvas_touchStartHandler=function(t){if(1==this.state){for(var e=this.currentTouchList.length,i=(t.stageX-R.STAGE_OFFSET_X)/R.SCALE,r=t.stageY/R.SCALE,s=[],n=0;n<e;n++)if(null==this.currentTouchList[n]){var a=this.usedCircles[n],o=i-a.x,c=r-a.y;s.push(new b(n,o*o+c*c))}0!=s.length&&(s.sort(b.sorter),this.currentTouchList[s[0].i]=t);for(n=0;n<e;n++)if(null==this.currentTouchList[n])return;this.startHandle(t)}},e.prototype.startHandle=function(t){this.state=2,this.startTime=(new Date).getTime();for(var e,i,r=this.currentTouchList,s=this.currentTouchList.length,n=0,a=0,o=0;o<s;o++)n+=((e=r[o]).stageX-R.STAGE_OFFSET_X)/R.SCALE,a+=e.stageY/R.SCALE;n/=s,a/=s,this.gp.init(0,n,a),this.gp.visible=!0,this.gpParticle.x=n,this.gpParticle.y=a,this.gpParticle.visible=!0;for(var c=0;c<s;c++)e=r[c],(i=this.usedCircles[c]).init(e.pointerID,n,a),i.drawCircle(0,20);this.canvas_touchMoveHandler(t),this.reticle.visible=!0,this.reticle.drawReticle(6710886,25,60,100,105),this.reticle.x=n,this.reticle.y=a,this.reticle.scaleX=5,this.reticle.scaleY=5,this.reticle.rotation=-180,createjs.Tween.get(this.reticle).to({scaleX:1,scaleY:1},300,createjs.Ease.backOut).wait(100).to({rotation:0},300,createjs.Ease.backOut)},e.prototype.canvas_touchMoveHandler=function(t){for(var e=this.currentTouchList.length,i=0;i<e;i++)if(this.currentTouchList[i]&&this.currentTouchList[i].pointerID==t.pointerID){this.currentTouchList[i]=t;break}if(2==this.state){for(var r,s,n=new a,o=this.usedCircles.length,c=0;c<o;c++){s=this.usedCircles[c],r=this.currentTouchList[c];var h=s.getDPercent((r.stageX-R.STAGE_OFFSET_X)/R.SCALE,r.stageY/R.SCALE),l=255*h|0,u=void 0;switch(s.colorName){case"r":n.setR(l),u=l<<16;break;case"g":n.setG(l),u=l<<8;break;case"b":n.setB(l),u=l}s.setData(u,15+15*h,(r.stageX-R.STAGE_OFFSET_X)/R.SCALE,r.stageY/R.SCALE,String(l)),this.currentParticleList[c].setData(s.baseColor,s.x,s.y,30+50*h)}this.currentRect.drawRect(n.getUint(),45);var p,g,d,_=this.targetRect.color,T=this.currentRect.color;d=(p=_.getR())>(d=255-p)?p:d,g=T.getR();var f=100*(1-Math.abs(g-p)/d)|0;f=f<0?0:f,d=(p=_.getG())>(d=255-p)?p:d,g=T.getG();var w=100*(1-Math.abs(g-p)/d)|0;w=w<0?0:w,d=(p=_.getB())>(d=255-p)?p:d,g=T.getB();var x=100*(1-Math.abs(g-p)/d)|0,v=(f+w+(x=x<0?0:x))/300;this.gp.drawCircle(n.getUint(),15+15*v),this.gpParticle.setOnlyColor(n.getUint(),10+30*v,20+30*v)}},e.prototype.canvas_touchEndHandler=function(t){for(var e=this.currentTouchList.length,i=0;i<e;i++)if(this.currentTouchList[i]&&this.currentTouchList[i].pointerID==t.pointerID){this.currentTouchList[i]=null;break}if(2==this.state){for(var r,s=!1,n=this.usedCircles.length,a=0;a<n;a++)if(r=this.usedCircles[a],t.pointerID==r.identifier){s=!0;break}s&&this.end()}},e.prototype.end=function(){this.state=3,this.check()},e.prototype.check=function(){var t,e,i,r,s,n,a=this.targetRect.color,o=this.currentRect.color;n=(t=a.getR())>(n=255-t)?t:n,e=o.getR(),i=(i=100*(1-Math.abs(e-t)/n)|0)<0?0:i,n=(t=a.getG())>(n=255-t)?t:n,e=o.getG(),r=(r=100*(1-Math.abs(e-t)/n)|0)<0?0:r,n=(t=a.getB())>(n=255-t)?t:n,e=o.getB();var c=(i+r+(s=(s=100*(1-Math.abs(e-t)/n)|0)<0?0:s))/3,h=c>>2,l=h*h*h*(100+this.timeLeft*this.timeLeft)/1e3,u=new f;u.time=this.timeLeft,u.r=0|i,u.g=0|r,u.b=0|s,u.average=0|c,u.total=Math.floor(l),u.target=a.getUint(),u.result=o.getUint(),this.scoreList[this.ROUND_MAX-this.round]=u,this.cover.setData(u),this.cover.visible=!0,this.cover.alpha=0,createjs.Tween.get(this.cover).to({alpha:1},300,createjs.Ease.getPowOut(2))},e.prototype.start=function(){this.gp.visible=!1,this.gpParticle.visible=!1;for(var t=this.usedCircles.length,e=0;e<t;e++)this.usedCircles[e].initDraw(this.usedCircles[e].baseColor,25);this.reticle.visible=!1,createjs.Tween.get(this.cover).to({alpha:0},300,createjs.Ease.getPowOut(2)).set({visible:!1});var i=20+235*Math.random(),r=20+235*Math.random(),s=20+235*Math.random();this.targetRect.drawRect(i<<16|r<<8|s|0,45),this.currentRect.drawRect(0,45),this.state=0,this.textTime.text="",this.textStart.text="Round "+(this.ROUND_MAX-this.round+1)+"\nStart!",this.textRound.text="Round "+(this.ROUND_MAX-this.round+1),this.containerTextStart.alpha=0,this.containerTextStart.scaleX=1,this.containerTextStart.scaleY=1,createjs.Tween.get(this.containerTextStart).wait(300).to({alpha:1},200).wait(1e3).to({alpha:0,scaleX:4,scaleY:4},300,createjs.Ease.getElasticInOut(2,1)),createjs.Tween.get(this).wait(1300).set({state:1})},e.prototype.next=function(){this.round--,this.round>0?this.start():this.dispatchEvent("result",this)},e.prototype.dispose=function(){this.stage.removeAllEventListeners("stagemousedown"),this.stage.removeAllEventListeners("stagemousemove"),this.stage.removeAllEventListeners("stagemouseup"),this.targetRect=null,this.currentRect=null,this.reticle=null,this.gp=null,this.gpParticle=null;for(var t=0;t<3;t++)this.usedCircles[t],this.currentParticleList[t];this.usedCircles=null,this.currentTouchList=null,this.currentParticleList=null,this.textTime=null,this.textStart=null,this.textRound=null,this.cover.removeAllEventListeners("next"),this.cover=null,this.scoreList=null,this.removeAllChildren()},e}(y),b=function(){function t(t,e){this.i=t,this.d=e}return t.sorter=function(t,e){return t.d<e.d?-1:t.d>e.d?1:0},t}(),E=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),O=function(t){function e(e){return t.call(this,e)||this}return E(e,t),e.prototype.init=function(){for(var t=this,e=this.manager.datas[0],i=l.addText(this,"36px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,33,"Result"),r=0,s=e.length,n=[],a=0;a<s;a++){var o=e[a];"Round"+(a+1)+": "+o.total+"\n",r+=o.total,n[a]=l.addText(this,"24px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,101+32*a,"Round"+(a+1)+" : "+o.total)}var c=l.addText(this,"36px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,223,"Your Score");this._textTotal=l.addText(this,"56px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,265,String(r)),this._btnTweet=new p(187,35,"Tweet"),this._btnTweet.x=R.STAGE_WIDTH>>1,this._btnTweet.y=362,this._btnTweet.on("click",function(){var t="https://twitter.com/?status=ColorCreate SCORE : "+r+" %23ColorCreate %23createjsjp";window.open(t)}),this._btnTweet.visible=!0,this._btnRetry=new p(187,35,"Retry"),this._btnRetry.x=R.STAGE_WIDTH>>1,this._btnRetry.y=412,this.addChild(this._btnRetry),this._btnRetry.on("click",function(){t.dispatchEvent("retry",t)}),i.alpha=0,createjs.Tween.get(i).wait(400).to({alpha:1},200,createjs.Ease.getPowOut(2));for(a=0;a<s;a++)n[a].alpha=0,createjs.Tween.get(n[a]).wait(800+350*a).to({alpha:1},200,createjs.Ease.getPowOut(2));c.alpha=0,createjs.Tween.get(c).wait(2200).to({alpha:1},300,createjs.Ease.getPowOut(2)),this._totalScore=0,this._textTotal.alpha=0,createjs.Tween.get(this._textTotal).wait(2800).to({alpha:1},300,createjs.Ease.getPowOut(2)),createjs.Tween.get(this).wait(2900).set({r:0,g:0,b:0}).to({_totalScore:r},400).call(this.onTick).set({isPlaying:!1}),this._btnTweet.scaleX=0,this._btnTweet.scaleY=0,createjs.Tween.get(this._btnTweet).wait(3600).to({scaleX:1,scaleY:1},300,createjs.Ease.getPowOut(5)),this._btnRetry.scaleX=0,this._btnRetry.scaleY=0,createjs.Tween.get(this._btnRetry).wait(3600).to({scaleX:1,scaleY:1},300,createjs.Ease.getPowOut(5)),this.isPlaying=!0},e.prototype.onTick=function(){this.isPlaying&&(this._textTotal.text=String(Math.floor(this._totalScore)))},e.prototype.dispose=function(){this._btnRetry.removeAllEventListeners("click"),this._btnRetry.dispose(),this._btnRetry=null,this._btnTweet.removeAllEventListeners("click"),this._btnTweet.dispose(),this._btnTweet=null,this.removeAllChildren()},e}(y),C=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),j=function(t){function e(e){return t.call(this,e)||this}return C(e,t),e.prototype.init=function(){var t=this;this._btnStart=new p(187,35,"Start"),this._btnStart.x=R.STAGE_WIDTH>>1,this._btnStart.y=362,this.addChild(this._btnStart),this._btnStart.on("click",function(){t.dispatchEvent("start",t)}),l.addText(this,"32px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,161,"Color Create"),l.addText(this,"18px "+R.FONT_NAME,"#FFFFFF",R.STAGE_WIDTH>>1,228,"powered by ICS INC.")},e.prototype.dispose=function(){this._btnStart.removeAllEventListeners("click"),this._btnStart.dispose(),this._btnStart=null,this.removeAllChildren()},e}(y),A=function(){function t(){this.viewList=[]}return t.prototype.addView=function(t){this.viewList.push(t),t.manager=this},t.prototype.gotoView=function(t,e){var i;this.datas=e;for(var r=this.viewList.length,s=0;s<r;s++)if(this.viewList[s].sceneId==t){i=this.viewList[s];break}if(null!=i){var n=createjs.Tween.get(this,{paused:!0});null!=this.currentView&&n.call(this.currentView.hide,null,this.currentView).wait(this.currentView.hideTime).call(this.currentView.dispose,null,this.currentView),this.currentView=i,n.call(this.currentView.init,null,this.currentView).call(this.currentView.show,null,this.currentView).wait(this.currentView.showTime),n.setPaused(!1)}},t}();i.d(e,"Main",function(){return R}),window.addEventListener("DOMContentLoaded",function(){n.particleImage=new Image,n.particleImage.onload=function(){new R},n.particleImage.src="images/particle_base.png"});var R=function(){function t(){var e=this;this.canvas=document.getElementById("canv"),this.canvas.height=innerHeight,this.canvas.width=innerWidth,this.stage=new createjs.Stage(this.canvas),t.SCALE=this.canvas.height/t.HEIGHT,t.WIDTH=this.canvas.width/t.SCALE,this.stage.scaleX=t.SCALE,this.stage.scaleY=t.SCALE,t.STAGE_OFFSET_X=this.canvas.width-t.STAGE_WIDTH*t.SCALE>>1,this.stage.x=t.STAGE_OFFSET_X,createjs.Ticker.framerate=60,createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.on("tick",this.tick,this),this.stage.enableMouseOver(60),createjs.Touch.isSupported()&&createjs.Touch.enable(this.stage),this.manager=new A;var i=new j("title");i.addToStage(this.stage),this.manager.addView(i),i.on("start",function(){e.manager.gotoView("game")});var r=new F("game");r.addToStage(this.stage),this.manager.addView(r),r.on("result",function(t){e.manager.gotoView("result",[t.target.scoreList])});var s=new O("result");s.addToStage(this.stage),this.manager.addView(s),s.on("retry",function(){e.manager.gotoView("game")}),this.manager.gotoView("title")}return t.prototype.tick=function(){this.stage.update()},t.FONT_NAME="Bungee",t.STAGE_WIDTH=320,t.STAGE_HEIGHT=480,t.WIDTH=t.STAGE_WIDTH,t.HEIGHT=t.STAGE_HEIGHT,t.STAGE_OFFSET_X=0,t}()}]);
//# sourceMappingURL=main.js.map